{"ast":null,"code":"import _slicedToArray from\"C:/Users/adeeb/Desktop/CodingDojo/Projects/ExteriorMernProject/MERN-Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,Navigate}from\"react\";import{Link,useParams,useNavigate,useLocation}from\"react-router-dom\";import axios from\"axios\";import\"bootstrap/dist/css/bootstrap.min.css\";import Carousel from\"react-bootstrap/Carousel\";import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Listing=function Listing(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listingObj=_useState2[0],setListingObj=_useState2[1];var _useState3=useState(\"pending\"),_useState4=_slicedToArray(_useState3,2),request_status=_useState4[0],setRequest_Status=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),renter=_useState6[0],setRenter=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),listing=_useState8[0],setListing=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loaded=_useState10[0],setLoaded=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),request=_useState12[0],setRequest=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),alreadyBooked=_useState14[0],setAlreadyBooked=_useState14[1];var _useParams=useParams(),renterid=_useParams.renterid,listingid=_useParams.listingid;useEffect(function(){setRenter(renterid);setListing(listingid);});var navigate=useNavigate();useEffect(function(){axios.get(\"http://localhost:8000/api/listings/\"+listingid).then(function(res){setListingObj(res.data);setLoaded(true);}).catch(function(err){return console.log(err);});},[]);useEffect(function(){axios.get(\"http://localhost:8000/api/requests\").then(function(res){setRequest(res.data);var repeatRequest=res.data.filter(function(object,i){return object.renter===renter&&object.listing===listing;});console.log(repeatRequest);if(repeatRequest.length>0){setAlreadyBooked(true);}}).catch(function(err){return console.log(err);});},[renter]);var onSubmitHandler=function onSubmitHandler(e){if(alreadyBooked===false){axios.post(\"http://localhost:8000/api/requests\",{renter:renter,listing:listing,request_status:request_status}).then(function(res){console.log(res);navigate(\"/renter/\".concat(renterid));alert(\"Booking Request Sent!\");}).catch(function(err){return console.log(err);});}else{alert(\"You've already made a booking request!\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topBar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leftSide\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"stayHome\",children:\"StayHome\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightSide\",children:[/*#__PURE__*/_jsx(Link,{to:\"/renter/\".concat(renter),class:\"btn btn-primary\",children:\"Go Back\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",class:\"btn btn-primary\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"little\",children:\"Book this listing today!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"listingInfo\",children:[/*#__PURE__*/_jsx(\"img\",{src:loaded&&\"\".concat(listingObj.photo_url),width:\"550\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"listingText\",children:[/*#__PURE__*/_jsx(\"h3\",{children:listingObj.address}),/*#__PURE__*/_jsx(\"h5\",{children:listingObj.description}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-success\",onClick:onSubmitHandler,children:\"Request to book\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"botBar\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://1000logos.net/wp-content/uploads/2021/10/logo-Meta.png\",width:\"50\",height:\"30\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://th.bing.com/th/id/R.0b96193508a806746ea68f0e1c0c0694?rik=Fi4%2froOKPymHLg&riu=http%3a%2f%2ffc00.deviantart.net%2ffs71%2ff%2f2014%2f031%2fc%2fd%2ftwitter_logo_vector_by_oguzhanbahardesign-d74i1sd.png&ehk=lLaZa%2fIDkISChl24W9Ek2d5nRmjQLJR3vzsW%2bXG4Umw%3d&risl=&pid=ImgRaw&r=0\",width:\"40\",height:\"30\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://www.freelogovectors.net/wp-content/uploads/2016/12/instagram-logo1.png\",width:\"40\",height:\"40\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Contact Us\"})]})]});};export default Listing;","map":{"version":3,"names":["React","useEffect","useState","Navigate","Link","useParams","useNavigate","useLocation","axios","Carousel","jsx","_jsx","jsxs","_jsxs","Listing","props","_useState","_useState2","_slicedToArray","listingObj","setListingObj","_useState3","_useState4","request_status","setRequest_Status","_useState5","_useState6","renter","setRenter","_useState7","_useState8","listing","setListing","_useState9","_useState10","loaded","setLoaded","_useState11","_useState12","request","setRequest","_useState13","_useState14","alreadyBooked","setAlreadyBooked","_useParams","renterid","listingid","navigate","get","then","res","data","catch","err","console","log","repeatRequest","filter","object","i","length","onSubmitHandler","e","post","concat","alert","children","className","to","class","src","photo_url","width","address","description","type","onClick","height"],"sources":["C:/Users/adeeb/Desktop/CodingDojo/Projects/ExteriorMernProject/MERN-Project/client/src/views/Listing.js"],"sourcesContent":["import React, { useEffect, useState,Navigate } from \"react\";\r\nimport { Link, useParams,useNavigate,useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Carousel from \"react-bootstrap/Carousel\";\r\nimport './style.css'\r\n\r\nconst Listing = (props) => {\r\n    const [listingObj, setListingObj] = useState([]);\r\n    const [request_status,setRequest_Status] = useState(\"pending\");\r\n    const [renter, setRenter] = useState(\"\");\r\n    const [listing,setListing] = useState(\"\");\r\n    const [loaded, setLoaded] = useState(false);\r\n    const [request,setRequest] = useState([]);\r\n    const [alreadyBooked,setAlreadyBooked] = useState(false);\r\n    const { renterid,listingid } = useParams();\r\n    useEffect(()=>{\r\n        setRenter(renterid);\r\n        setListing(listingid);\r\n    })\r\n    \r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        axios.get(\"http://localhost:8000/api/listings/\" + listingid)\r\n            .then((res) => {\r\n                setListingObj(res.data);\r\n                setLoaded(true);\r\n                \r\n            })\r\n            .catch((err) => console.log(err));\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        axios.get(\"http://localhost:8000/api/requests\")\r\n        .then((res) => {\r\n            setRequest(res.data)\r\n            const repeatRequest = res.data.filter((object,i)=> \r\n                object.renter === renter && object.listing === listing\r\n            \r\n            );\r\n            console.log(repeatRequest)\r\n            if(repeatRequest.length > 0){\r\n                setAlreadyBooked(true)\r\n            }\r\n            \r\n\r\n        })\r\n        .catch((err) => console.log(err))\r\n    },[renter])\r\n\r\n    const onSubmitHandler = e => {\r\n    if(alreadyBooked === false){\r\n        axios.post(\"http://localhost:8000/api/requests\",{\r\n            renter,\r\n            listing,\r\n            request_status\r\n\r\n        })\r\n        .then(res=>{\r\n            console.log(res)\r\n            navigate(`/renter/${renterid}`)\r\n            alert(\"Booking Request Sent!\")\r\n        })\r\n        .catch(err => console.log(err))\r\n\r\n    } else{\r\n        alert(\"You've already made a booking request!\")\r\n    }}\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className='topBar'>\r\n                <div className=\"leftSide\">\r\n                    <Link to ={\"/\"} className=\"stayHome\">StayHome</Link>\r\n                </div>\r\n                <div className=\"rightSide\">\r\n                <Link to={`/renter/${renter}`} class = \"btn btn-primary\">Go Back</Link>\r\n                <Link to=\"/\" class = \"btn btn-primary\">Logout</Link>\r\n                </div>\r\n            </div>\r\n            <h1 className=\"little\">Book this listing today!</h1>\r\n            <div className=\"listingInfo\">\r\n                <img src={loaded && `${listingObj.photo_url}`} width=\"550\"/>\r\n                <div className=\"listingText\">\r\n                    <h3>{listingObj.address}</h3>\r\n                    <h5>{listingObj.description}</h5>\r\n                    <button type=\"button\" class=\"btn btn-success\" onClick={onSubmitHandler}>Request to book</button>\r\n                </div>\r\n            </div>\r\n            <div className=\"botBar\">\r\n                <img src=\"https://1000logos.net/wp-content/uploads/2021/10/logo-Meta.png\" width=\"50\" height=\"30\"/>\r\n                <img src=\"https://th.bing.com/th/id/R.0b96193508a806746ea68f0e1c0c0694?rik=Fi4%2froOKPymHLg&riu=http%3a%2f%2ffc00.deviantart.net%2ffs71%2ff%2f2014%2f031%2fc%2fd%2ftwitter_logo_vector_by_oguzhanbahardesign-d74i1sd.png&ehk=lLaZa%2fIDkISChl24W9Ek2d5nRmjQLJR3vzsW%2bXG4Umw%3d&risl=&pid=ImgRaw&r=0\" width=\"40\" height=\"30\"/>\r\n                <img src=\"https://www.freelogovectors.net/wp-content/uploads/2016/12/instagram-logo1.png\" width=\"40\" height=\"40\"/>\r\n                <h3>Contact Us</h3>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default Listing;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}